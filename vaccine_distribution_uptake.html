<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2021-11-21" />

<title>Visualizations</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.0.4.1/leaflet.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="website.html">Home</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Visualizations</h1>
<h4 class="date">11/21/2021</h4>

</div>


<div id="how-has-the-vaccine-been-distributed-in-these-areas-what-are-the-rates-of-uptakevaccination" class="section level2">
<h2>How has the vaccine been distributed in these areas? What are the rates of uptake/vaccination?</h2>
<p>First look at percentage of people vaccinated by each state</p>
<pre class="r"><code>perc_vacc = 
  read_csv(file = &quot;./data/us_state_vaccinations.csv&quot;) %&gt;%
  filter(date == &quot;2021-11-20&quot;) %&gt;%
  filter(!(location %in% c(&quot;Virgin Islands&quot;, &quot;Veterans Health&quot;,&quot;Republic of Palau&quot;, &quot;Puerto Rico&quot;,   &quot;Northern Mariana Islands&quot;, &quot;Marshall Islands&quot;, &quot;Indian Health Svc&quot;, &quot;Guam&quot;, &quot;Federated States of Micronesia&quot;, &quot;District of Columbia&quot;, &quot;Dept of Defense&quot;, &quot;Bureau of Prisons&quot;, &quot;American Samoa&quot;,    &quot;United States&quot;))) %&gt;% 
  select(location, people_fully_vaccinated_per_hundred)</code></pre>
<pre><code>## Rows: 19795 Columns: 14</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr   (1): location
## dbl  (12): total_vaccinations, total_distributed, people_vaccinated, people_...
## date  (1): date</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>url = &quot;https://developers.google.com/public-data/docs/canonical/states_csv&quot;
latlong_html = read_html(url)

latlong_df = 
  latlong_html %&gt;% 
  html_table() %&gt;% 
  as.data.frame() %&gt;% 
  select(-state) %&gt;% 
  relocate(name) %&gt;% 
  rename(location = name) %&gt;% 
  mutate(
     location = recode(location, &quot;New York&quot; = &quot;New York State&quot;))</code></pre>
<p>Merging of dataset to get lat/long</p>
<pre class="r"><code>map_df = merge(perc_vacc, latlong_df , by = &quot;location&quot;)</code></pre>
<p>Plot of percentage vaccinated</p>
<pre class="r"><code>percentage_plot = 
map_df %&gt;%
  mutate(
    location = fct_reorder(location, people_fully_vaccinated_per_hundred)
  ) %&gt;% 
  ggplot(aes(x = location, y = people_fully_vaccinated_per_hundred)) +
  geom_point() +
  labs(
    x = &quot;State&quot;,
    y = &quot;Percentage of People Fully Vaccinated&quot;,
    title = &quot;Percentage of People Fully Vaccinated by State&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme(text = element_text(size = 8),
        axis.text.x = element_text(angle = 90, hjust = 1))</code></pre>
<p>Map of percentage vaccinated</p>
<pre class="r"><code>pal = colorNumeric(&quot;viridis&quot;, NULL)

map_df %&gt;% 
  leaflet() %&gt;% 
  addTiles() %&gt;% 
  addCircleMarkers(~longitude, ~latitude, color = ~pal(people_fully_vaccinated_per_hundred))</code></pre>
<div id="htmlwidget-cb1bc756f4c31a2fceb7" style="width:90%;height:345.6px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-cb1bc756f4c31a2fceb7">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[32.318231,63.588753,34.048928,35.20105,36.778261,39.550051,41.603221,38.910832,27.664827,32.157435,19.898682,44.068202,40.633125,40.551217,41.878003,39.011902,37.839333,31.244823,45.253783,39.045755,42.407211,44.314844,46.729553,32.354668,37.964253,46.879682,41.492537,38.80261,43.193852,40.058324,34.97273,43.299428,35.759573,47.551493,40.417287,35.007752,43.804133,41.203322,41.580095,33.836081,43.969515,35.517491,31.968599,39.32098,44.558803,37.431573,47.751074,38.597626,43.78444,43.075968],[-86.902298,-154.493062,-111.093731,-91.831833,-119.417932,-105.782067,-73.087749,-75.52767,-81.515754,-82.907123,-155.665857,-114.742041,-89.398528,-85.602364,-93.097702,-98.484246,-84.270018,-92.145024,-69.445469,-76.641271,-71.382437,-85.602364,-94.6859,-89.398528,-91.831833,-110.362566,-99.901813,-116.419389,-71.572395,-74.405661,-105.032363,-74.217933,-79.0193,-101.002012,-82.907123,-97.092877,-120.554201,-77.194525,-71.477429,-81.163725,-99.901813,-86.580447,-99.901813,-111.093731,-72.577841,-78.656894,-120.740139,-80.454903,-88.787868,-107.290284],10,null,null,{"interactive":true,"className":"","stroke":true,"color":["#46307E","#2A788E","#297B8E","#3C508B","#3BBB75","#3DBC74","#ECE51B","#28AE80","#27AD81","#3B528B","#26AC82","#482878","#29AF7F","#365C8D","#228C8D","#297B8E","#31678E","#3E4C8A","#F2E51D","#89D548","#D9E219","#297B8E","#34B679","#443A83","#355E8D","#31668E","#21918C","#29798E","#50C46A","#91D742","#43BF70","#9ED93A","#2A778E","#3E4A89","#2E6F8E","#33638D","#4BC26C","#34B679","#F5E61F","#34618D","#29798E","#3B528B","#287C8E","#26828E","#FDE725","#58C765","#5BC863","#440154","#1FA187","#472B7A"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#46307E","#2A788E","#297B8E","#3C508B","#3BBB75","#3DBC74","#ECE51B","#28AE80","#27AD81","#3B528B","#26AC82","#482878","#29AF7F","#365C8D","#228C8D","#297B8E","#31678E","#3E4C8A","#F2E51D","#89D548","#D9E219","#297B8E","#34B679","#443A83","#355E8D","#31668E","#21918C","#29798E","#50C46A","#91D742","#43BF70","#9ED93A","#2A778E","#3E4A89","#2E6F8E","#33638D","#4BC26C","#34B679","#F5E61F","#34618D","#29798E","#3B528B","#287C8E","#26828E","#FDE725","#58C765","#5BC863","#440154","#1FA187","#472B7A"],"fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[19.898682,63.588753],"lng":[-155.665857,-69.445469]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>#Work on creating choropleth map (?)</code></pre>
<p>Now look at total number of vaccines shipped to each state and the number of people vaccinated</p>
<pre class="r"><code>uptake_df = 
 read_csv(file = &quot;./data/us_state_vaccinations.csv&quot;) %&gt;%
  filter(date == &quot;2021-11-20&quot;) %&gt;%
  filter(!(location %in% c(&quot;Virgin Islands&quot;, &quot;Veterans Health&quot;,&quot;Republic of Palau&quot;, &quot;Puerto Rico&quot;,   &quot;Northern Mariana Islands&quot;, &quot;Marshall Islands&quot;, &quot;Indian Health Svc&quot;, &quot;Guam&quot;, &quot;Federated States of Micronesia&quot;, &quot;District of Columbia&quot;, &quot;Dept of Defense&quot;, &quot;Bureau of Prisons&quot;, &quot;American Samoa&quot;,    &quot;United States&quot;))) %&gt;% 
  select(location, people_vaccinated, total_distributed) %&gt;% 
  mutate(
    rate_of_uptake = people_vaccinated / total_distributed)</code></pre>
<pre><code>## Rows: 19795 Columns: 14</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr   (1): location
## dbl  (12): total_vaccinations, total_distributed, people_vaccinated, people_...
## date  (1): date</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Plot rate of uptake by state</p>
<pre class="r"><code>uptake_plot = 
uptake_df %&gt;% 
  mutate(
    location = fct_reorder(location, rate_of_uptake)) %&gt;% 
  ggplot(aes(x = location, y = rate_of_uptake)) +
  geom_point() +
  labs(
    x = &quot;State&quot;,
    y = &quot;Rate of Uptake&quot;,
    title = &quot;Percentage of Vaccination Uptake by State&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme(text = element_text(size = 8),
        axis.text.x = element_text(angle = 90, hjust = 1)) </code></pre>
<p>Create choropleth map for this (?)</p>
<p>Let’s look at how the different vaccines are distributed in the US</p>
<p>Pfizer Allocation</p>
<pre class="r"><code>pfizer_df = 
  GET(&quot;https://data.cdc.gov/resource/saz5-9hgg.csv&quot;) %&gt;% 
  content() %&gt;% 
  janitor::clean_names() %&gt;% 
  filter(!(jurisdiction %in% c(&quot;Virgin Islands&quot;, &quot;Veterans Health&quot;,&quot;Republic of Palau&quot;, &quot;Puerto Rico&quot;, &quot;Northern Mariana Islands&quot;, &quot;Marshall Islands&quot;, &quot;Indian Health Svc&quot;, &quot;Guam&quot;, &quot;Federated States of Micronesia&quot;, &quot;District of Columbia&quot;, &quot;Dept of Defense&quot;, &quot;Bureau of Prisons&quot;, &quot;American Samoa&quot;, &quot;United States&quot;, &quot;Federal Entities&quot;, &quot;Mariana Islands&quot;, &quot;Micronesia&quot;, &quot;Palau&quot;, &quot;U.S. Virgin Islands&quot;))) %&gt;% 
  group_by(jurisdiction) %&gt;% 
  summarize(sum_of_first = sum(x1st_dose_allocations)) %&gt;% 
  rename(pfizer = sum_of_first)</code></pre>
<pre><code>## Rows: 1000 Columns: 4</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (1): jurisdiction
## dbl  (2): _1st_dose_allocations, _2nd_dose_allocations
## dttm (1): week_of_allocations</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Moderna Allocation</p>
<pre class="r"><code>moderna_df = 
  GET(&quot;https://data.cdc.gov/resource/b7pe-5nws.csv&quot;) %&gt;% 
  content() %&gt;% 
  janitor::clean_names() %&gt;% 
  filter(!(jurisdiction %in% c(&quot;Virgin Islands&quot;, &quot;Veterans Health&quot;,&quot;Republic of Palau&quot;, &quot;Puerto Rico&quot;, &quot;Northern Mariana Islands&quot;, &quot;Marshall Islands&quot;, &quot;Indian Health Svc&quot;, &quot;Guam&quot;, &quot;Federated States of Micronesia&quot;, &quot;District of Columbia&quot;, &quot;Dept of Defense&quot;, &quot;Bureau of Prisons&quot;, &quot;American Samoa&quot;, &quot;United States&quot;, &quot;Federal Entities&quot;, &quot;Mariana Islands&quot;, &quot;Micronesia&quot;, &quot;Palau&quot;, &quot;U.S. Virgin Islands&quot;))) %&gt;% 
  group_by(jurisdiction) %&gt;% 
  summarize(sum_of_first = sum(x1st_dose_allocations)) %&gt;% 
  rename(moderna = sum_of_first)</code></pre>
<pre><code>## Rows: 1000 Columns: 4</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (1): jurisdiction
## dbl  (2): _1st_dose_allocations, _2nd_dose_allocations
## dttm (1): week_of_allocations</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>J&amp;J Allocation</p>
<pre class="r"><code>jj_df = 
  GET(&quot;https://data.cdc.gov/resource/w9zu-fywh.csv&quot;) %&gt;% 
  content() %&gt;% 
  janitor::clean_names() %&gt;% 
  filter(!(jurisdiction %in% c(&quot;Virgin Islands&quot;, &quot;Veterans Health&quot;,&quot;Republic of Palau&quot;, &quot;Puerto Rico&quot;, &quot;Northern Mariana Islands&quot;, &quot;Marshall Islands&quot;, &quot;Indian Health Svc&quot;, &quot;Guam&quot;, &quot;Federated States of Micronesia&quot;, &quot;District of Columbia&quot;, &quot;Dept of Defense&quot;, &quot;Bureau of Prisons&quot;, &quot;American Samoa&quot;, &quot;United States&quot;, &quot;Federal Entities&quot;, &quot;Mariana Islands&quot;, &quot;Micronesia&quot;, &quot;Palau&quot;, &quot;U.S. Virgin Islands&quot;))) %&gt;% 
  group_by(jurisdiction) %&gt;% 
  summarize(sum_of_first = sum(x1st_dose_allocations)) %&gt;% 
  rename(jj = sum_of_first)</code></pre>
<pre><code>## Rows: 504 Columns: 3</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (1): jurisdiction
## dbl  (1): _1st_dose_allocations
## dttm (1): week_of_allocations</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Merge all three vaccines</p>
<pre class="r"><code>pfizer_moderna_df = 
  merge(pfizer_df, moderna_df, by = &quot;jurisdiction&quot;)

all_vacc_df = 
  merge(pfizer_moderna_df, jj_df, by = &quot;jurisdiction&quot;) %&gt;%  
  pivot_longer(
    pfizer:jj,
    names_to = &quot;vaccine&quot;,
    values_to = &quot;doses_allocated&quot;)</code></pre>
<p>Plot</p>
<pre class="r"><code>total_allocation = 
  all_vacc_df %&gt;% 
  group_by(jurisdiction) %&gt;% 
  summarize(sum = sum(doses_allocated)) %&gt;% 
  mutate(
    jurisdiction = fct_reorder(jurisdiction, sum)
  ) %&gt;% 
  ggplot(aes(x = jurisdiction, y = sum)) +
  geom_point() +
  labs(
    x = &quot;State&quot;,
    y = &quot;Number of Doses Distributed&quot;,
    title = &quot;Total Number of Vaccines Distributed to Each State&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme(text = element_text(size = 8),
        axis.text.x = element_text(angle = 90, hjust = 1))</code></pre>
<pre class="r"><code># Could possibly make this into a plotly...Having a hard time deciding how to best show this allocation

type_allocation =  
 all_vacc_df %&gt;% 
  mutate(
    jurisdiction = fct_reorder(jurisdiction, doses_allocated)
  ) %&gt;% 
  ggplot(aes(x = jurisdiction, y = doses_allocated, color = vaccine)) +
  geom_point() +
  labs(
    x = &quot;States&quot;,
    y = &quot;Doses Allocated&quot;,
    title = &quot;Dose Allocation by Type in Each State&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme(text = element_text(size = 8),
        axis.text.x = element_text(angle = 90, hjust = 1)) +
  scale_color_discrete(name = &quot;Vaccine&quot;, labels = c(&quot;Janssen&quot;, &quot;Moderna&quot;, &quot;Pfizer&quot;))</code></pre>
<pre class="r"><code>gridExtra::grid.arrange(total_allocation, type_allocation)</code></pre>
<p><img src="vaccine_distribution_uptake_files/figure-html/unnamed-chunk-15-1.png" width="90%" /></p>
<pre class="r"><code>gridExtra::grid.arrange(percentage_plot, uptake_plot)</code></pre>
<p><img src="vaccine_distribution_uptake_files/figure-html/unnamed-chunk-16-1.png" width="90%" /></p>
<pre class="r"><code>perc_vacc_uptake = 
  merge(perc_vacc, uptake_df, by = &quot;location&quot;) %&gt;% 
  mutate(
    rate_of_uptake = 100 * rate_of_uptake,
    location = fct_reorder(location, people_fully_vaccinated_per_hundred))

colors = c(&quot;Percentage Fully Vaccinated&quot; = &quot;blue&quot;, &quot;Uptake Rate&quot; = &quot;red&quot;)

  ggplot(perc_vacc_uptake, aes(x = location)) +
  geom_point(aes(y = people_fully_vaccinated_per_hundred, color = &quot;Percentage Fully Vaccinated&quot;)) +
  geom_point(aes(y = rate_of_uptake, color = &quot;Uptake Rate&quot;)) +
  labs(
    x = &quot;State&quot;,
    y = &quot;Percentage&quot;,
    title = &quot;Percentage of People Fully Vaccinated \nand the Rate of Uptake by State&quot;,
    color = &quot;Legend&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme(text = element_text(size = 8),
        axis.text.x = element_text(angle = 90, hjust = 1)) +
  scale_color_manual(values = colors)</code></pre>
<p><img src="vaccine_distribution_uptake_files/figure-html/unnamed-chunk-17-1.png" width="90%" /></p>
<pre class="r"><code>all_vacc_df %&gt;% 
  mutate(
    jurisdiction = fct_reorder(jurisdiction, doses_allocated)
  ) %&gt;% 
  ggplot(aes(x = jurisdiction, y = doses_allocated, fill = vaccine)) +
  geom_col() +
  labs(
    x = &quot;States&quot;,
    y = &quot;Doses Allocated&quot;,
    title = &quot;Dose Allocation by Type in Each State&quot;) +
  theme(plot.title = element_text(hjust = 0.5)) +
  theme(text = element_text(size = 8),
        axis.text.x = element_text(angle = 90, hjust = 1)) +
  scale_fill_discrete(name = &quot;Vaccine&quot;, labels = c(&quot;Janssen&quot;, &quot;Moderna&quot;, &quot;Pfizer&quot;))</code></pre>
<p><img src="vaccine_distribution_uptake_files/figure-html/unnamed-chunk-18-1.png" width="90%" /></p>
<p>Vaccination Rate by Age</p>
<pre class="r"><code>age_df = 
  GET(&quot;https://data.cdc.gov/resource/gxj9-t96f.csv&quot;) %&gt;% 
  content() %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(
    cdc_case_earliest_dt = as.factor(cdc_case_earliest_dt)) %&gt;% 
  mutate(
    series_complete_pop_pct = 100 * series_complete_pop_pct)</code></pre>
<pre><code>## Rows: 1000 Columns: 5</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (1): agegroupvacc
## dbl  (3): _7_day_avg_group_cases_per, administered_dose1_pct, series_complet...
## dttm (1): cdc_case_earliest_dt</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>age_df %&gt;% 
  filter(
    cdc_case_earliest_dt == &quot;2021-11-28&quot;) %&gt;%
  ggplot(aes(x = agegroupvacc, y = series_complete_pop_pct)) +
  geom_col(fill = &quot;blue&quot;) +
  labs(
    x = &quot;Age Group&quot;,
    y = &quot;Percentage&quot;,
    title = &quot;Vaccination Rate by Age&quot;) +
  theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="vaccine_distribution_uptake_files/figure-html/unnamed-chunk-20-1.png" width="90%" /></p>
<p>Trend of Vaccination Rate by Age</p>
<p>Vaccination Rate by Race Note: Race/Ethnicity was only available for 145,361,148 (73.3%) people fully vaccinated.</p>
<pre class="r"><code>race_df = 
  GET(&quot;https://data.cdc.gov/resource/km4m-vcsb.csv&quot;) %&gt;% 
  content() %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(date = as.factor(date)) %&gt;% 
  filter(
    date == &quot;2021-12-03&quot;) %&gt;% 
  mutate(
    demographic_category = str_replace(demographic_category, &quot;Race_eth_&quot;, &quot;&quot;)
  ) %&gt;% 
  filter(
    demographic_category %in% c(&quot;NHBlack&quot;, &quot;NHWhite&quot;, &quot;Hispanic&quot;, &quot;NHAIAN&quot;, &quot;NHAsian&quot;, &quot;NHNHOPI&quot;)) %&gt;% 
  mutate(
    demographic_category = recode(demographic_category, NHBlack = &quot;Black&quot;,
    NHWhite = &quot;White&quot;,
    NHAsian = &quot;Asian&quot;,
    NHAIAN = &quot;American Indian/Alaska Native&quot;,
    NHNHOPI = &quot;Native Hawaiian/Other Pacific Islander&quot;)) %&gt;% 
  select(demographic_category, series_complete_pop_pct)</code></pre>
<pre><code>## Rows: 1000 Columns: 10</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (1): demographic_category
## dbl  (8): administered_dose1, administered_dose1_pct_known, administered_dos...
## dttm (1): date</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>race_df %&gt;% 
  mutate(
    demographic_category = fct_reorder(demographic_category, series_complete_pop_pct)
  ) %&gt;% 
  ggplot(aes(x = demographic_category, y = series_complete_pop_pct)) +
  geom_col(fill = &quot;blue&quot;) +
  labs(
    x = &quot;Race/Ethnicity&quot;,
    y = &quot;Percentage&quot;,
    title = &quot;Vaccination Rate by Race/Ethnicity&quot;) +
  theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="vaccine_distribution_uptake_files/figure-html/unnamed-chunk-23-1.png" width="90%" /></p>
<p>Vaccination Rate by Sex</p>
<pre class="r"><code>sex_df = 
  GET(&quot;https://data.cdc.gov/resource/km4m-vcsb.csv&quot;) %&gt;% 
  content() %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(date = as.factor(date)) %&gt;% 
  filter(
    date == &quot;2021-12-03&quot;,
    demographic_category %in% c(&quot;Sex_Male&quot;, &quot;Sex_Female&quot;)) %&gt;% 
  mutate(
    demographic_category = str_replace(demographic_category, &quot;Sex_&quot;, &quot;&quot;)
  ) %&gt;% 
  select(demographic_category, series_complete_pop_pct)</code></pre>
<pre><code>## Rows: 1000 Columns: 10</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (1): demographic_category
## dbl  (8): administered_dose1, administered_dose1_pct_known, administered_dos...
## dttm (1): date</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>sex_df %&gt;% 
  ggplot(aes(x = demographic_category, y = series_complete_pop_pct)) +
  geom_col(fill = &quot;blue&quot;) +
  labs(
    x = &quot;Sex&quot;,
    y = &quot;Percentage&quot;,
    title = &quot;Vaccination Rate by Sex&quot;) +
  theme(plot.title = element_text(hjust = 0.5))</code></pre>
<p><img src="vaccine_distribution_uptake_files/figure-html/unnamed-chunk-25-1.png" width="90%" /></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
